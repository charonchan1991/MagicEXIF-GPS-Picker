function initializeMap(){var a=[mapLatLng.lat,mapLatLng.lng];map=new ymaps.Map("mapUICanvas",{center:a,zoom:mapZoom}),mapIsLoaded=!0;mapMarker=new ymaps.Placemark(a,{},{draggable:!0,iconLayout:"default#image",iconImageHref:"res/img/pin_normal.png",iconImageSize:[22,38],iconImageOffset:[-11,-30]}),map.geoObjects.add(mapMarker),CustomTools=function(a){CustomTools.superclass.constructor.call(this,a),this._$content=null},ymaps.util.augment(CustomTools,ymaps.collection.Item,{onAddToMap:function(a){CustomTools.superclass.onAddToMap.call(this,a),this.getParent().getChildElement(this).then(this._onGetChildElement,this)},onRemoveFromMap:function(a){CustomTools.superclass.onRemoveFromMap.call(this,a)},_onGetChildElement:function(a){var e=$("#mapUICtl");this._$content=e.appendTo(a),e.show()}});var e=new CustomTools;map.controls.add(e,{float:"none",position:{top:0,left:0}}),mapLoaderFunc.initializeTools(),map.events.add("actiontickcomplete",function(a){switch(a.originalEvent.tick.timingFunction){case"ease-in":case"ease-out":mapZoom=a.originalEvent.tick.zoom}}),mapMarker.events.add("mousedown",function(a){mapMarker.options.set("iconImageHref","res/img/pin_normal_faded.png")}),mapMarker.events.add("dragstart",function(a){mapMarker.options.set("iconImageHref","res/img/pin_dragging_faded.png")}),mapMarker.events.add("mouseup",function(a){mapMarker.options.set("iconImageHref","res/img/pin_normal.png")}),mapMarker.events.add("dragend",function(a){mapMarker.options.set("iconImageHref","res/img/pin_normal.png"),mapLatLng.lat=mapMarker.geometry.getCoordinates()[0],mapLatLng.lng=mapMarker.geometry.getCoordinates()[1],mapLoaderFunc.enableEdit()})}function moveMarkerTo(a){var e=[a.lat,a.lng];mapMarker.geometry.setCoordinates(e),map.panTo(e)}var map,mapMarker;