function initializeMap(a){var t=mapLatLng;map=L.map("mapUICanvas",{zoomControl:!1}).setView(t,mapZoom);var o='Map data &copy; <a href="http://openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors',e=' | powered by <a href="http://leafletjs.com" target="_blank">Leaflet</a>';switch(a){case"mapbox":case"bright":case"dark":var r="mapbox"==a;L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:o+', Imagery &copy <a href="http://mapbox.com" target="_blank">Mapbox</a>'+e,maxZoom:r?18:11,minZoom:r?0:1,id:r?"mapbox.streets":"mapbox.world-"+a,accessToken:"pk.eyJ1IjoiY2hhcm9uY2hhbjE5OTEiLCJhIjoiY2owZzByNzN0MDJjeTMzcmt5em5jYjhnZyJ9.xP7ewkleFDn1rPbb_83K6A"}).addTo(map);break;case"wiki":case"wikimedia":L.tileLayer("https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",{maxZoom:18,id:"wikipedia-map-01",attribution:o+', Imagery &copy <a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use" target="_blank">Wikimedia</a>'+e}).addTo(map);break;case"carto":case"cartodb":L.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:o+', Imagery &copy <a href="https://carto.com/attribution" target="_blank">CARTO</a>'+e}).addTo(map);break;case"esri":case"arcgis":L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",{variant:"World_Street_Map",attribution:'Map data & Imagery &copy <a href="http://www.esri.com/" target="_blank">ESRI</a>'+e}).addTo(map);break;case"google_stl":L.tileLayer("https://maps.googleapis.com/maps/vt?lyrs=s&x={x}&y={y}&z={z}",{maxZoom:18,attribution:'Map data & Imagery &copy <a href="http://www.google.com/" target="_blank">Google</a>'+e}).addTo(map);break;case"google_stl_cn":L.tileLayer("http://www.google.cn/maps/vt?lyrs=s&gl=cn&x={x}&y={y}&z={z}",{maxZoom:18,attribution:'Map data & Imagery &copy <a href="http://www.google.com/" target="_blank">Google</a>'+e}).addTo(map);break;case"google_lfl":L.tileLayer("https://maps.googleapis.com/maps/vt?lyrs=m@189&x={x}&y={y}&z={z}",{maxZoom:18,attribution:'Map data & Imagery &copy <a href="http://www.google.com/" target="_blank">Google</a>'+e}).addTo(map);break;case"google_lfl_cn":L.tileLayer("http://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}",{maxZoom:18,attribution:'Map data & Imagery &copy <a href="http://www.google.com/" target="_blank">Google</a>'+e}).addTo(map);break;default:L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:o+e}).addTo(map)}mapIsLoaded=!0,map.on("zoomend",function(a){mapZoom=map.getZoom()});var p=L.icon({iconUrl:"res/img/pin_normal.png",iconSize:[22,38],iconAnchor:[11,30]});mapMarker=L.marker(t,{icon:p,draggable:!0}).addTo(map);var m=L.Control.extend({options:{position:"topleft"},onAdd:function(a){var t=$("#mapUICtl");return t.show(),t[0]}});map.addControl(new m),mapLoaderFunc.initializeTools(),mapMarker.on("mousedown",function(a){mapMarker.setOpacity(.6)}).on("mouseup",function(a){mapMarker.setOpacity(1)}).on("dragend",function(a){mapLatLng.lat=a.target.getLatLng().lat,mapLatLng.lng=a.target.getLatLng().lng,mapMarker.setOpacity(1),mapLoaderFunc.enableEdit()})}function moveMarkerTo(a){mapMarker.setLatLng(a),map.panTo(a)}var map,mapMarker;